<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√©monstration - Association Utilisateur-Club UFSC</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .demo-section {
            border: 1px solid #ddd;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .form-section {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
        }
        .radio-option {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }
        .radio-option:hover {
            background: #f0f0f0;
        }
        .conditional-fields {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            display: none;
        }
        .conditional-fields.active {
            display: block;
        }
        .form-row {
            margin: 10px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .required {
            color: #dc3545;
        }
        .hint {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "‚úÖ ";
            margin-right: 8px;
        }
        .admin-interface {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
        }
        .frontend-interface {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
        }
        .code-example {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üîó Association Utilisateur-Club UFSC - D√©monstration</h1>
    
    <div class="demo-section">
        <h2>üìã Vue d'ensemble des fonctionnalit√©s</h2>
        <p>Cette d√©monstration pr√©sente les nouvelles fonctionnalit√©s d'association entre utilisateurs WordPress et clubs UFSC :</p>
        <ul class="feature-list">
            <li>Association d'utilisateurs lors de l'affiliation frontend</li>
            <li>Cr√©ation automatique d'utilisateurs WordPress</li>
            <li>Gestion bidirectionnelle admin (club ‚Üî utilisateur)</li>
            <li>Contraintes d'unicit√© (1 utilisateur = 1 club)</li>
            <li>Synchronisation automatique des donn√©es</li>
        </ul>
    </div>

    <div class="demo-section frontend-interface">
        <h2>üåê Interface Frontend - Affiliation de Club</h2>
        <p><strong>Contexte :</strong> Un nouveau club souhaite s'affilier √† l'UFSC via le formulaire frontend.</p>
        
        <div class="form-section">
            <h3>Utilisateur WordPress pour g√©rer le club</h3>
            <p class="hint">S√©lectionnez comment associer un utilisateur √† ce club :</p>
            
            <label class="radio-option">
                <input type="radio" name="user_association_demo" value="current" checked onclick="showFields('current')">
                <span>Utiliser mon compte actuel</span>
                <div class="hint">Compte: Jean Dupont (jean.dupont) - jean.dupont@example.com</div>
            </label>
            
            <label class="radio-option">
                <input type="radio" name="user_association_demo" value="create" onclick="showFields('create')">
                <span>Cr√©er un nouveau compte utilisateur</span>
            </label>
            
            <label class="radio-option">
                <input type="radio" name="user_association_demo" value="existing" onclick="showFields('existing')">
                <span>Associer un compte existant</span>
            </label>
            
            <!-- Create new user fields -->
            <div id="create-fields" class="conditional-fields">
                <div class="form-row">
                    <label for="new_user_login">Nom d'utilisateur <span class="required">*</span></label>
                    <input type="text" id="new_user_login" placeholder="Ex: club.tennis.paris">
                </div>
                <div class="form-row">
                    <label for="new_user_email">Email <span class="required">*</span></label>
                    <input type="email" id="new_user_email" placeholder="Ex: president@tennisparis.fr">
                </div>
                <div class="form-row">
                    <label for="new_user_display_name">Nom d'affichage</label>
                    <input type="text" id="new_user_display_name" placeholder="Ex: Club Tennis Paris">
                </div>
                <div class="hint">
                    Un mot de passe sera g√©n√©r√© automatiquement et envoy√© par email.
                </div>
            </div>
            
            <!-- Existing user selection -->
            <div id="existing-fields" class="conditional-fields">
                <div class="form-row">
                    <label for="existing_user_id">S√©lectionner un utilisateur <span class="required">*</span></label>
                    <select id="existing_user_id">
                        <option value="">-- Choisir un utilisateur --</option>
                        <option value="15">Marie Martin (marie.martin) - marie.martin@example.com</option>
                        <option value="23">Pierre Durand (pierre.durand) - pierre.durand@example.com</option>
                        <option value="31">Sophie Bernard (sophie.bernard) - sophie.bernard@example.com</option>
                    </select>
                </div>
            </div>
            
            <div class="hint" style="margin-top: 15px;">
                <strong>Important :</strong> L'utilisateur associ√© pourra g√©rer le club depuis l'espace membre. 
                Cette association ne pourra √™tre modifi√©e que par un administrateur apr√®s la cr√©ation.
            </div>
        </div>
    </div>

    <div class="demo-section admin-interface">
        <h2>‚öôÔ∏è Interface Admin - Profil Utilisateur WordPress</h2>
        <p><strong>Contexte :</strong> Un administrateur modifie le profil d'un utilisateur et souhaite l'associer √† un club.</p>
        
        <div class="form-section">
            <h3>Association Club UFSC</h3>
            <div class="form-row">
                <label for="ufsc_club_id">Club associ√©</label>
                <select id="ufsc_club_id">
                    <option value="">-- Aucun club associ√© --</option>
                    <option value="12" selected>Tennis Club de Paris (Paris)</option>
                    <option value="25">Association Sportive Lyon (Lyon)</option>
                    <option value="38" disabled>Club Volleyball Nice (Nice) - D√©j√† associ√©</option>
                    <option value="42">Racing Club Marseille (Marseille)</option>
                </select>
                <div class="hint">
                    Associer cet utilisateur √† un club UFSC. Un utilisateur ne peut √™tre associ√© qu'√† un seul club.
                    <br><strong>Actuellement associ√© √†:</strong> Tennis Club de Paris (Paris)
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section admin-interface">
        <h2>üè¢ Interface Admin - Formulaire Club</h2>
        <p><strong>Contexte :</strong> Un administrateur cr√©e ou modifie un club et souhaite associer un utilisateur.</p>
        
        <div class="form-section">
            <h3>Utilisateur WordPress associ√©</h3>
            <div class="form-row">
                <label for="responsable_id">Utilisateur WordPress associ√©</label>
                <select id="responsable_id">
                    <option value="">-- Aucun utilisateur associ√© --</option>
                    <option value="15">Marie Martin (marie.martin) - marie.martin@example.com</option>
                    <option value="23" selected>Pierre Durand (pierre.durand) - pierre.durand@example.com</option>
                    <option value="31" disabled title="Cet utilisateur est d√©j√† associ√© √† un autre club">Sophie Bernard (sophie.bernard) - sophie.bernard@example.com - D√©j√† associ√©</option>
                </select>
                <div class="hint">
                    Associer un utilisateur WordPress qui aura acc√®s √† la gestion du club.
                    <br><strong>Actuellement associ√© :</strong> Pierre Durand (pierre.durand)
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üîÑ Synchronisation Bidirectionnelle</h2>
        <p>Le syst√®me garantit la coh√©rence des donn√©es entre les profils utilisateur et les fiches club :</p>
        
        <div class="code-example">
<strong>Sc√©nario :</strong> Modification de l'association via le profil utilisateur

1. Admin va dans "Utilisateurs" ‚Üí "Modifier Pierre Durand"
2. Change "Club associ√©" de "Tennis Club Paris" vers "Racing Club Marseille"
3. Sauvegarde

<strong>R√©sultat automatique :</strong>
- Pierre Durand n'est plus associ√© au Tennis Club Paris
- Pierre Durand est maintenant associ√© au Racing Club Marseille
- La fiche du Tennis Club Paris n'affiche plus d'utilisateur associ√©
- La fiche du Racing Club Marseille affiche Pierre Durand comme utilisateur associ√©

<strong>S√©curit√© :</strong>
- Gestion transactionnelle (rollback en cas d'erreur)
- Validation de l'unicit√©
- Messages d'erreur explicites
        </div>
    </div>

    <div class="demo-section">
        <h2>‚ö° Fonctionnalit√©s Avanc√©es</h2>
        <ul class="feature-list">
            <li>Pr√©vention des associations multiples avec messages explicites</li>
            <li>Validation c√¥t√© client (JavaScript) et serveur (PHP)</li>
            <li>Cr√©ation automatique d'utilisateurs avec g√©n√©ration de mot de passe</li>
            <li>Notification email automatique pour nouveaux comptes</li>
            <li>Interface responsive avec champs conditionnels</li>
            <li>Gestion des cas d'erreur (utilisateur supprim√©, club inexistant)</li>
            <li>Tests automatis√©s pour validation continue</li>
            <li>Documentation compl√®te et exemples d'utilisation</li>
        </ul>
    </div>

    <script>
        function showFields(type) {
            // Hide all conditional fields
            document.querySelectorAll('.conditional-fields').forEach(field => {
                field.classList.remove('active');
            });
            
            // Show selected fields
            if (type === 'create') {
                document.getElementById('create-fields').classList.add('active');
            } else if (type === 'existing') {
                document.getElementById('existing-fields').classList.add('active');
            }
        }
    </script>
</body>
</html>